(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{131:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__17MJB",selectedPage:"Users_selectedPage__J63sh"}},133:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__3cd8Y"}},134:function(e,t,n){e.exports={item:"Post_item__ihtu9"}},15:function(e,t,n){e.exports={nav:"Navbar_nav__2imOE",item:"Navbar_item__zmMk4",active:"Navbar_active__3mbhk"}},164:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var r=n(0),s=(n(164),n(66)),a=n.n(s),c=n(1),i=n.n(c),o=(n(95),n(7)),u=n(10),l=n(13),j=n(30),d=n(31),b=n(34),f=n(33),p=n(15),O=n.n(p);var h=function(){return Object(r.jsxs)("nav",{className:O.a.nav,children:[Object(r.jsx)("div",{className:"".concat(O.a.item," ").concat(O.a.active),children:Object(r.jsx)(l.b,{to:"/profile",activeClassName:O.a.active,children:"Profile"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(l.b,{to:"/dialogs",activeClassName:O.a.active,children:"Messages"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(l.b,{to:"/news",activeClassName:O.a.active,children:"News"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(l.b,{to:"/music",activeClassName:O.a.active,children:"Music"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(l.b,{to:"/settings",activeClassName:O.a.active,children:"Settings"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(l.b,{to:"/users",activeClassName:O.a.active,children:"Users"})})]})},g=function(){return Object(r.jsx)("div",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"News about cars"}),Object(r.jsx)("li",{children:"News about gadjets"}),Object(r.jsx)("li",{children:"News about animals"}),Object(r.jsx)("li",{children:"News about celebrities"}),Object(r.jsx)("li",{children:"News about holidays"})]})})},m=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("li",{children:"Hot playlist"}),Object(r.jsx)("li",{children:"Top charts"}),Object(r.jsx)("li",{children:"Summer"}),Object(r.jsx)("li",{children:"For fitness"}),Object(r.jsx)("li",{children:"For study"})]})},x=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Settings"})})},v=n(35),w=n(4),E={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Andrew"},{id:3,name:"Sveta"},{id:4,name:"Sasha"},{id:5,name:"Viktor"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your it kamasutra?"},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"Yo"}]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NEW_MESSAGE":var n=t.message;return Object(w.a)(Object(w.a)({},e),{},{messages:[].concat(Object(v.a)(e.messages),[{id:6,message:n}])});default:return e}},A=n(36),S=n.n(A),N=function(e){var t="/dialogs/1"+e.id;return Object(r.jsx)("div",{className:S.a.dialog+" "+S.a.active,children:Object(r.jsx)(l.b,{to:t,activeClassName:S.a.active,children:e.name})})},_=n(125),y=n(126),C=function(e){if(!e)return"Filed is required"},U=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e)}},I=n(57),k=n(53),B=n.n(k),T=function(e){var t=e.meta,n=t.touched,s=t.error,a=e.children,c=n&&s;return Object(r.jsxs)("div",{className:B.a.formControl+" "+(c?B.a.error:""),children:[Object(r.jsx)("div",{children:a}),c&&Object(r.jsx)("span",{children:s})]})},D=function(e){var t=e.input,n=(e.meta,Object(I.a)(e,["input","meta"]));return Object(r.jsx)(T,Object(w.a)(Object(w.a)({},e),{},{children:Object(r.jsx)("textarea",Object(w.a)(Object(w.a)({},t),n))}))},z=function(e){var t=e.input,n=(e.meta,Object(I.a)(e,["input","meta"]));return Object(r.jsx)(T,Object(w.a)(Object(w.a)({},e),{},{children:Object(r.jsx)("input",Object(w.a)(Object(w.a)(Object(w.a)({},t),e),n))}))},L=U(100),M=Object(y.a)({form:"dialogAddMessageForm"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)(_.a,{component:D,name:"newMessageBody",placeholder:"Enter your message",validate:[C,L]}),Object(r.jsx)("button",{children:"add"})]})})),F=function(e){var t=e.state.dialogs.map((function(e,t){return Object(r.jsx)(N,{name:e.name,id:e.id},t)})),n=e.state.messages.map((function(e,t){return Object(r.jsxs)("div",{children:[e.message," "]})}));if(!1===e.isAuth)return Object(r.jsx)(u.a,{to:"/login"});return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:S.a.dialogs,children:[Object(r.jsx)("div",{className:S.a.dialogsItems,children:t}),Object(r.jsx)("div",{className:S.a.messages,children:n})]}),Object(r.jsx)(M,{onSubmit:function(t){e.addMessage(t.newMessageBody)}})]})},Q=n(11),G=function(e){return{isAuth:e.auth.isAuth}};function R(e){return Object(Q.b)(G)((function(t){var n=t.isAuth,s=Object(I.a)(t,["isAuth"]);return n?Object(r.jsx)(e,Object(w.a)({},s)):Object(r.jsx)(u.a,{to:"/login"})}))}var W=Object(o.d)(Object(Q.b)((function(e){return{state:e.messagesPage,isAuth:e.auth.isAuth}}),(function(e){return{addMessage:function(t){e(function(e){return{type:"ADD_NEW_MESSAGE",message:e}}(t))}}})),R)(F),Z=n(12),V=n.n(Z),H=n(20),Y=n(130),K=n.n(Y).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0",headers:{"API-KEY":"8c49b133-928a-4a57-b997-bbf0ea6abb17"}}),J={getUsers:function(e,t){return K.get("/users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},followUser:function(e){return K.post("/follow/".concat(e))},unfollowUser:function(e){return K.delete("/follow/".concat(e))}},X=function(e){return K.get("/profile/".concat(e))},q=function(e){return K.get("/profile/status/".concat(e))},$=function(e){return K.put("/profile/status",{status:e})},ee=function(e){return console.warn("Obsolete method.Please use profileApi object"),X(e)},te=function(){return K.get("/auth/me")},ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return K.post("auth/login",{email:e,password:t,rememberMe:n})},re=function(){return K.delete("auth/login")},se=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(w.a)(Object(w.a)({},e),r):e}))},ae={users:[],pageSize:10,totalUserCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},ce=function(e){return{type:"FOLLOW",userId:e}},ie=function(e){return{type:"UNFOLLOW",userId:e}},oe=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},ue=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},le=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,id:t}},je=function(){var e=Object(H.a)(V.a.mark((function e(t,n,r,s){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n);case 2:0===e.sent.data.resultCode&&t(s(n)),t(le(!1,n));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(w.a)(Object(w.a)({},e),{},{users:se(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(w.a)(Object(w.a)({},e),{},{users:se(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(w.a)(Object(w.a)({},e),{},{users:Object(v.a)(t.users)});case"SET_CURRENT_PAGE":return Object(w.a)(Object(w.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USER_COUNT":return Object(w.a)(Object(w.a)({},e),{},{totalUserCount:t.totalCount});case"TOGGLE_IS_FETCHING":return Object(w.a)(Object(w.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(w.a)(Object(w.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(v.a)(e.followingInProgress),[t.id]):Object(v.a)(e.followingInProgress.filter((function(e){return e!==t.id})))})}return e},be=n(56),fe=n(72),pe=n.n(fe),Oe=function(e){for(var t=e.totalItemsCount,n=e.portionSize,s=e.currentPage,a=e.onPageChanged,i=Math.ceil(t/n),o=[],u=1;u<=i;u++)o.push(u);var l=Math.ceil(i/n),j=Object(c.useState)(1),d=Object(be.a)(j,2),b=d[0],f=d[1],p=(b-1)*n+1,O=b*n;return Object(r.jsxs)("div",{className:pe.a.paginator,children:[b>1&&Object(r.jsx)("button",{onClick:function(){return f(b-1)},children:"Previous"}),o.filter((function(e){return e>=p&&e<=O})).map((function(e){return Object(r.jsxs)("span",{className:s===e?pe.a.currentPage:pe.a.page,onClick:function(t){a(e)},children:[e," "]},e)})),l>b&&Object(r.jsx)("button",{onClick:function(){return f(b+1)},children:"Next"}),Object(r.jsx)("div",{})]})},he=n(131),ge=n.n(he),me=n.p+"static/media/pngtree-user-vector-avatar-png-image_1541962.60b92e78.jpeg",xe=function(e){var t=e.user,n=e.followingInProgress,s=e.follow,a=e.unfollow;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(l.b,{to:"/profile/".concat(t.id),children:Object(r.jsx)("img",{src:null!==t.photos.small?t.photos.small:me,className:ge.a.userPhoto,alt:"img"})})}),Object(r.jsx)("div",{children:t.followed?Object(r.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)},children:"Unfollow"}):Object(r.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){s(t.id)},children:"Follow"})})]}),Object(r.jsx)("span",{children:Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:t.name}),Object(r.jsx)("div",{children:t.status?t.status:" No status"})]})})]})},ve=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Oe,{totalItemsCount:e.totalUserCount,portionSize:e.pageSize,onPageChanged:e.onPageChanged,currentPage:e.currentPage}),e.users.map((function(t){return Object(r.jsx)(xe,{user:t,followingInProgress:e.followingInProgress,follow:e.follow,unfollow:e.unfollow})}))]})},we=n(300);function Ee(){return Object(r.jsx)("div",{children:Object(r.jsx)(we.a,{color:"primary"})})}var Pe=n(132),Ae=function(e){return e.usersPage.users},Se=function(e){return e.usersPage.pageSize},Ne=function(e){return e.usersPage.totalUserCount},_e=function(e){return e.usersPage.currentPage},ye=function(e){return e.usersPage.isFetching},Ce=function(e){return e.usersPage.followingInProgress},Ue=Object(Pe.a)(Ae,(function(e){return e.filter((function(e){return!0}))})),Ie=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.getUsers(t,e.props.pageSize)},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[this.props.isFetching?Object(r.jsx)(Ee,{}):null,Object(r.jsx)(ve,{totalUserCount:this.props.totalUserCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress})]})}}]),n}(i.a.Component),ke=Object(o.d)(Object(Q.b)((function(e){return{users:Ae(e),pageSize:Se(e),totalUserCount:Ne(e),currentPage:_e(e),isFetching:ye(e),followingInProgress:Ce(e),superUsers:Ue(e)}}),{setCurrentPage:oe,getUsers:function(e,t){return function(){var n=Object(H.a)(V.a.mark((function n(r){var s;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(ue(!0)),r(oe(e)),n.next=4,J.getUsers(e,t);case 4:s=n.sent,r(ue(!1)),r({type:"SET_USERS",users:s.items}),r({type:"SET_TOTAL_USER_COUNT",totalCount:s.totalCount});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},follow:function(e){return function(){var t=Object(H.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(le(!0,e)),t.next=3,je(n,e,J.followUser.bind(J),ce);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(H.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(le(!0,e)),t.next=3,je(n,e,J.unfollowUser.bind(J),ie);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),R)(Ie),Be={posts:[{id:1,message:"Its a first post",likesCount:3},{id:2,message:"Its a second post",likesCount:3},{id:3,message:"Its a third post",likesCount:3},{id:4,message:"Its a fourth post",likesCount:3},{id:5,message:"Its a fifth post",likesCount:3}],newText:"",profile:null,status:""},Te=function(e){return{type:"SET_USER_PROFILE",profile:e}},De=function(e){return{type:"SET-STATUS",status:e}},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n=t.postMessage.trim();if(n){var r={id:5,message:t.postMessage,likesCount:0};return Object(w.a)(Object(w.a)({},e),{},{posts:[].concat(Object(v.a)(e.posts),[r]),newText:""})}return e;case"CHANGE-TEXT":return e.newText=t.text,Object(w.a)({},e);case"SET_USER_PROFILE":return Object(w.a)(Object(w.a)({},e),{},{profile:t.profile});case"SET-STATUS":return Object(w.a)(Object(w.a)({},e),{},{status:t.status});case"DELETE_POST":return Object(w.a)(Object(w.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});default:return Object(w.a)({},e)}},Le=n(133),Me=n.n(Le),Fe=function(e){var t=Object(c.useState)(!1),n=Object(be.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(e.status),o=Object(be.a)(i,2),u=o[0],l=o[1];Object(c.useEffect)((function(){l(e.status)}),[e.status]);var j=function(){a(!1),e.updateStatus(u)};return Object(r.jsxs)("div",{children:[!s&&Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:function(){a(!0)},children:e.status||"------"})}),s&&Object(r.jsx)("div",{children:Object(r.jsx)("input",{onBlur:j,autoFocus:!0,onChange:function(e){l(e.currentTarget.value)},value:u,type:"text",onSubmit:j})})]})},Qe=function(e){var t=e.profile,n=e.status,s=e.updateStatus;return t?Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:Me.a.descriptionBlock,children:[Object(r.jsx)("img",{src:t.photos.large,alt:""}),Object(r.jsx)(Fe,{status:n,updateStatus:s})]})}):Object(r.jsx)(Ee,{})},Ge=n(68),Re=n.n(Ge),We=n(134),Ze=n.n(We);var Ve=function(e){return Object(r.jsxs)("div",{className:Ze.a.item,children:[Object(r.jsx)("img",{src:"https://avatars.mds.yandex.net/get-kino-vod-films-gallery/28788/47e2fd514411e18b76af786d7417062d/280x178_2",alt:""}),e.message,Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:[" ",e.likeCounter," like(s)"]})})]})},He=U(100),Ye=i.a.memo((function(e){console.log("render yo");var t=e.posts.map((function(e,t){return Object(r.jsx)(Ve,{message:e.message,likeCounter:e.likesCount},t)}));return Object(r.jsxs)("div",{className:Re.a.postsBlock,children:[Object(r.jsx)("div",{children:Object(r.jsx)("h3",{children:"My posts"})}),Object(r.jsx)(Ke,{onSubmit:function(t){t&&e.addPost(t.newPostBody)}}),Object(r.jsx)("div",{className:"s.posts",children:t})]})})),Ke=Object(y.a)({form:"profileAddPostForm"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(_.a,{name:"newPostBody",component:D,placeholder:"Enter your post text",validate:[C,He]})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Add post"})})]})})),Je=Ye,Xe=Object(Q.b)((function(e){return{posts:e.profilePage.posts,value:e.profilePage.newText}}),(function(e){return{addPost:function(t){t&&e(function(e){return{type:"ADD-POST",postMessage:e}}(t))}}}))(Je);var qe=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Qe,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(r.jsx)(Xe,{})]})},$e=n(41),et="SET_USER_DATA",tt={userId:null,email:null,login:null,isAuth:!1},nt=function(e,t,n,r){return{type:et,data:{userId:e,email:t,login:n,isAuth:r}}},rt=function(){return function(){var e=Object(H.a)(V.a.mark((function e(t){var n,r,s,a,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,s=r.id,a=r.login,c=r.email,t(nt(s,c,a,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case et:return Object(w.a)(Object(w.a)({},e),t.data);default:return e}},at=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return Object(r.jsx)(qe,{status:this.props.status,updateStatus:this.props.updateStatus,profile:this.props.profile})}}]),n}(i.a.Component),ct=Object(o.d)(Object(Q.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{setUserProfile:Te,getUserProfile:function(e){return function(t){ee(e).then((function(e){t(Te(e.data))}))}},getStatus:function(e){return function(){var t=Object(H.a)(V.a.mark((function t(n){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(e);case 2:r=t.sent,n(De(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(H.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e);case 2:0===t.sent.data.resultCode&&n(De(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),u.f)(at),it=n(94),ot=n.n(it);var ut=function(e){return Object(r.jsxs)("header",{className:ot.a.header,children:[Object(r.jsx)("img",{src:"data:image/png;base64,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",alt:""}),Object(r.jsx)("div",{className:ot.a.loginBlock,children:e.isAuth?Object(r.jsxs)("div",{children:[e.login," - ",Object(r.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(r.jsx)(l.b,{to:"/login",children:"Login"})})]})},lt=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(r.jsx)(ut,Object(w.a)({},this.props))}}]),n}(i.a.Component),jt=Object(Q.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:nt,getAuthUserData:rt,logout:function(){return function(){var e=Object(H.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:0===e.sent.data.resultCode&&t(nt(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(lt),dt=Object(y.a)({form:"login"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(_.a,{placeholder:"Email",name:"email",component:z,validate:[C]})}),Object(r.jsx)("div",{children:Object(r.jsx)(_.a,{placeholder:"Password",name:"password",component:z,validate:[C],type:"password"})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(_.a,{type:"checkbox",name:"rememberMe",component:"input"}),"remember me"]}),e.error&&Object(r.jsx)("div",{className:B.a.formSummaryError,children:e.error}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]})})),bt=Object(Q.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var r=Object(H.a)(V.a.mark((function r(s){var a,c;return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ne(e,t,n);case 2:if(0!==(a=r.sent).data.resultCode){r.next=8;break}return r.next=6,s(rt());case 6:r.next=10;break;case 8:c=a.data.messages.length>0?a.data.messages[0]:"Some error",s(Object($e.a)("login",{email:c}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(r.jsx)(u.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(dt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})})),ft=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.InitializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(jt,{}),Object(r.jsx)(h,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(u.b,{path:"/",exact:!0,render:function(){return Object(r.jsx)(u.a,{to:"/profile"})}}),Object(r.jsx)(u.b,{path:"/dialogs",render:function(){return Object(r.jsx)(W,{})}}),Object(r.jsx)(u.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(ct,{})}}),Object(r.jsx)(u.b,{path:"/news",render:function(){return Object(r.jsx)(g,{})}}),Object(r.jsx)(u.b,{path:"/music",render:function(){return Object(r.jsx)(m,{})}}),Object(r.jsx)(u.b,{path:"/settings",render:function(){return Object(r.jsx)(x,{})}}),Object(r.jsx)(u.b,{path:"/users",render:function(){return Object(r.jsx)(ke,{})}}),Object(r.jsx)(u.b,{path:"/login",render:function(){return Object(r.jsx)(bt,{})}})]})]}):Object(r.jsx)(Ee,{})}}]),n}(i.a.Component),pt={initialized:!1},Ot=n(135),ht=n(127),gt=Object(o.c)({profilePage:ze,messagesPage:P,usersPage:de,auth:st,form:ht.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INITIALIZED":return Object(w.a)(Object(w.a)({},e),{},{initialized:!0});default:return e}}}),mt=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,xt=Object(o.e)(gt,mt(Object(o.a)(Ot.a))),vt=Object(o.d)(u.f,Object(Q.b)((function(e){return{initialized:e.app.initialized}}),{InitializeApp:function(){return function(e){e(rt()).then((function(){e({type:"SET_INITIALIZED"})}))}}}))(ft),wt=function(){return Object(r.jsx)(l.a,{children:Object(r.jsx)(Q.a,{store:xt,children:Object(r.jsx)(vt,{})})})};a.a.render(Object(r.jsx)(wt,{}),document.getElementById("root"))},36:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__2xRSA",dialogsItems:"Dialogs_dialogsItems__2sNe2",active:"Dialogs_active__2sQhs",messages:"Dialogs_messages__1w_Up",message:"Dialogs_message__1xIDh"}},53:function(e,t,n){e.exports={formControl:"FormsControls_formControl__3oI2W",error:"FormsControls_error__9lcue",formSummaryError:"FormsControls_formSummaryError__1F2-S"}},68:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__2ifKf",posts:"MyPosts_posts__3tZ1c"}},72:function(e,t,n){e.exports={page:"Paginator_page__z2MaR",currentPage:"Paginator_currentPage__14fUc"}},94:function(e,t,n){e.exports={header:"Header_header__1VCKf",loginBlock:"Header_loginBlock__6mma5"}},95:function(e,t,n){}},[[288,1,2]]]);
//# sourceMappingURL=main.2abf2137.chunk.js.map